#!/usr/bin/env node

var fs   = require('fs');
var path = require('path');

const { parseScript: from_js } = require("shift-parser");
const { safeDump: to_yaml }    = require('js-yaml');

var source;

for (var i = 2; i < process.argv.length; i++) {
  if (process.argv[i] === '-e' || process.argv[i] === '--eval') {
    source = process.argv[++i];
  } else if (process.argv[i][0] === '-') {
    errorExit('Unknown argument: ' + process.argv[i]);
  }
}

function errorExit(msg) {
  process.stderr.write(msg + '\n');
  process.exit(1);
}

console.log(to_yaml(from_js(source)));